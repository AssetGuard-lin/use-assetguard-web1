<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AssetGuard Pro - Dashboard System</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary:#0072CE; --bg:#f4f7fe; }
        *{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif;}
        body{background:var(--bg);height:100vh;display:flex;align-items:center;justify-content:center;overflow:hidden;}
        .login-card{
            background:#fff; padding:40px; border-radius:25px;
            width:90%; max-width:380px; text-align:center;
            box-shadow:0 20px 50px rgba(0,0,0,.08);
        }
        h2 { color: #333; margin-bottom: 5px; font-weight: 700; }
        #status-text { font-size: 13px; margin-bottom: 20px; color: #666; min-height: 20px;}
        input{
            width:100%; padding:14px; margin:10px 0;
            border-radius:12px; border:2px solid #eee; outline:none; transition: 0.3s;
        }
        input:focus { border-color: var(--primary); }
        button{
            width:100%; padding:15px; background:var(--primary); color:#fff;
            border:none; border-radius:12px; font-weight:700; cursor:pointer; margin-top: 10px;
        }
        button:disabled { background: #ccc; }
        
        /* Dashboard Menu Style */
        #dashboard-menu { display:none; margin-top:10px; text-align:left; }
        .nav-link { 
            display:flex; align-items:center; padding:12px; 
            color:#333; text-decoration:none; font-weight:500; 
            border-bottom:1px solid #f1f1f1; transition: 0.2s;
        }
        .nav-link:hover { background:#f8f9ff; color: var(--primary); }
        .logout-btn { background:#ff4757; margin-top:20px; font-size: 12px; padding: 10px; }
    </style>
</head>
<body>

<div class="login-card">
    <h2>AssetGuard</h2>
    <p id="status-text">Connecting to Secure Server...</p>

    <div id="login-form">
        <input id="user" type="email" placeholder="Email Address">
        <input id="pass" type="password" placeholder="Password">
        <button id="login-btn" onclick="handleLogin()">Login to Dashboard</button>
    </div>

    <div id="dashboard-menu">
        <p style="font-size:12px; color:#999; margin-bottom:10px; text-transform:uppercase;">Main Menu</p>
        <a href="sales.html" class="nav-link">ðŸ“Š Sales Dashboard</a>
        <a href="stock.html" class="nav-link">ðŸ“¦ Stock Management</a>
        <a href="customers.html" class="nav-link">ðŸ‘¥ Customer List</a>
        <a href="suppliers.html" class="nav-link">ðŸšš Suppliers</a>
        <a href="expenses.html" class="nav-link">ðŸ’¸ Expenses</a>
        <button class="logout-btn" onclick="auth.signOut()">Logout Account</button>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

<script>
    // --- CONFIGURE YOUR FIREBASE HERE ---
    const firebaseConfig = {
        apiKey: "AIzaSy..." , // <--- PASTE YOUR API KEY HERE
        authDomain: "assetguard-c8c8c.firebaseapp.com",
        projectId: "assetguard-c8c8c",
        storageBucket: "assetguard-c8c8c.appspot.com",
        messagingSenderId: "YOUR_SENDER_ID",
        appId: "YOUR_APP_ID" // <--- PASTE YOUR APP ID HERE
    };

    // Initialize
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const status = document.getElementById("status-text");
    const loginForm = document.getElementById("login-form");
    const dashMenu = document.getElementById("dashboard-menu");

    // Auth State Observer
    auth.onAuthStateChanged((user) => {
        if (user) {
            status.innerText = "Welcome, " + user.email;
            status.style.color = "green";
            loginForm.style.display = "none";
            dashMenu.style.display = "block";
            
            // OPTIONAL: Auto-jump to sales after 1.5 seconds
            setTimeout(() => { window.location.href = "sales.html"; }, 1500);
        } else {
            status.innerText = "Please sign in to continue";
            status.style.color = "#666";
            loginForm.style.display = "block";
            dashMenu.style.display = "none";
        }
    });

    // Login Function
    function handleLogin() {
        const email = document.getElementById("user").value;
        const pass = document.getElementById("pass").value;
        const btn = document.getElementById("login-btn");

        if(!email || !pass) return alert("Fill in all fields");

        status.innerText = "Authenticating...";
        btn.disabled = true;

        auth.signInWithEmailAndPassword(email, pass)
            .then(() => {
                // Success is handled by onAuthStateChanged above
            })
            .catch((error) => {
                status.innerText = "Error: " + error.message;
                status.style.color = "red";
                btn.disabled = false;
            });
    }
</script>
</body>
</html>
