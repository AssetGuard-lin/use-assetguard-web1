
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AssetGuard Pro - Management System</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary:#0072CE; --bg:#f4f7fe; --sidebar-w: 280px; }
        *{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif;}
        body { background: var(--bg); height: 100vh; overflow: hidden; }

        /* --- LOGIN SCREEN --- */
        #login-screen {
            position: fixed; inset: 0; background: var(--bg);
            display: flex; align-items: center; justify-content: center; z-index: 2000;
        }
        .login-card {
            background:#fff; padding:40px; border-radius:25px;
            width:90%; max-width:380px; text-align:center;
            box-shadow:0 20px 50px rgba(0,0,0,.08);
        }

        /* --- HOVERING SIDEBAR --- */
        #sidebar {
            position: fixed; left: 20px; top: 20px; bottom: 20px;
            width: var(--sidebar-w); background: #fff;
            border-radius: 20px; box-shadow: 10px 0 30px rgba(0,0,0,0.05);
            display: none; flex-direction: column;
            padding: 25px; z-index: 1000; transition: transform 0.3s ease;
        }
        
        .nav-container { 
            flex: 1; overflow-y: auto; margin: 15px 0; 
            padding-right: 5px;
        }
        /* Custom Scrollbar for Nav */
        .nav-container::-webkit-scrollbar { width: 4px; }
        .nav-container::-webkit-scrollbar-thumb { background: #eee; border-radius: 10px; }

        .sidebar-header { border-bottom: 2px solid #f4f7fe; padding-bottom: 15px; margin-bottom: 10px; }
        .nav-group { font-size: 11px; color: #aaa; margin: 15px 0 5px; font-weight: 700; text-transform: uppercase; }

        .nav-link { 
            display:flex; align-items:center; padding:12px 15px; 
            color:#444; text-decoration:none; font-weight:500; font-size: 14px;
            border-radius: 12px; margin-bottom: 4px; transition: 0.2s;
        }
        .nav-link:hover { background: #f0f4ff; color: var(--primary); }
        .nav-link.active { background: var(--primary); color: #fff; }

        /* --- MAIN CONTENT (Full Width) --- */
        #main-content { 
            width: 100%; height: 100vh; 
            padding-left: calc(var(--sidebar-w) + 40px); /* Space for floating sidebar */
            display: none; 
        }
        iframe { border: none; width: 100%; height: 100%; border-radius: 0; }

        /* UI Elements */
        input { width:100%; padding:14px; margin:10px 0; border-radius:12px; border:2px solid #eee; outline:none; }
        button.primary-btn { width:100%; padding:15px; background:var(--primary); color:#fff; border:none; border-radius:12px; font-weight:700; cursor:pointer; }
        .logout-btn { 
            background:#fff; color: #ff4757; padding: 12px; border-radius: 12px; 
            border: 2px solid #fff5f5; cursor: pointer; font-weight: 600; transition: 0.2s;
        }
        .logout-btn:hover { background: #ff4757; color: white; }

        /* Mobile View Adjustment */
        @media (max-width: 900px) {
            #main-content { padding-left: 0; }
            #sidebar { transform: translateX(-110%); }
            #sidebar.open { transform: translateX(0); }
        }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-card">
            <h2 style="color: var(--primary)">AssetGuard</h2>
            <p id="status-text">Secure Portal Access</p>
            <input id="user" type="email" placeholder="Email Address">
            <input id="pass" type="password" placeholder="Password">
            <button class="primary-btn" onclick="handleLogin()">Sign In</button>
        </div>
    </div>

    <nav id="sidebar">
        <div class="sidebar-header">
            <h2 style="color: var(--primary); font-size: 20px;">AssetGuard Pro</h2>
        </div>

        <div class="nav-container">
            <div class="nav-group">Main Ops</div>
            <a href="sales.html" target="content-frame" class="nav-link active">üìä Sales Dashboard</a>
            <a href="purchases.html" target="content-frame" class="nav-link">üõí Purchases</a>
            <a href="stock.html" target="content-frame" class="nav-link">üì¶ Stock Overview</a>
            <a href="stock_in.html" target="content-frame" class="nav-link">üì• Stock In</a>

            <div class="nav-group">Reports & Finance</div>
            <a href="cash_report.html" target="content-frame" class="nav-link">üí∞ Cash Report</a>
            <a href="expenses.html" target="content-frame" class="nav-link">üí∏ Expenses</a>
            <a href="expenses_history.html" target="content-frame" class="nav-link">‚è≥ Exp. History</a>
            <a href="vat_filing.html" target="content-frame" class="nav-link">üìù VAT Filing</a>

            <div class="nav-group">Credits & History</div>
            <a href="credit_payment.html" target="content-frame" class="nav-link">üí≥ Credit Payments</a>
            <a href="credit_report.html" target="content-frame" class="nav-link">üìÑ Credit Report</a>
            <a href="history.html" target="content-frame" class="nav-link">üïí System History</a>
        </div>
        
        <button class="logout-btn" onclick="logout()">Logout Account</button>
    </nav>

    <main id="main-content">
        <iframe name="content-frame" id="content-frame" src="about:blank"></iframe>
    </main>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyDCkP7LTzdNcvZhp24rRsQirYDCcrsuvOA",
        authDomain: "assetguard-c8c8c.firebaseapp.com",
        projectId: "assetguard-c8c8c",
        storageBucket: "assetguard-c8c8c.firebasestorage.app",
        messagingSenderId: "717561990429",
        appId: "1:717561990429:web:2b86968c4d3e6ea15ba5f4"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    const loginScreen = document.getElementById("login-screen");
    const sidebar = document.getElementById("sidebar");
    const mainContent = document.getElementById("main-content");
    const contentFrame = document.getElementById("content-frame");

    auth.onAuthStateChanged((user) => {
        if (user) {
            loginScreen.style.display = "none";
            sidebar.style.display = "flex";
            mainContent.style.display = "block";
            if (contentFrame.src === "about:blank") contentFrame.src = "sales.html";
        } else {
            loginScreen.style.display = "flex";
            sidebar.style.display = "none";
            mainContent.style.display = "none";
        }
    });

    function handleLogin() {
        const email = document.getElementById("user").value;
        const pass = document.getElementById("pass").value;
        auth.setPersistence(firebase.auth.Auth.Persistence.SESSION).then(() => {
            return auth.signInWithEmailAndPassword(email, pass);
        }).catch(err => alert(err.message));
    }

    function logout() {
        auth.signOut().then(() => location.reload());
    }

    // Handle Active States
    document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', function() {
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            this.classList.add('active');
        });
    });
</script>
</body>
</html>
